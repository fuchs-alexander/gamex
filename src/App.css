.app {
  width: min(98vw, 1536px);
  display: grid;
  gap: 16px;
  padding: 20px 22px 24px;
  border: 1px solid #d9e1d4;
  border-radius: 12px;
  background: #ffffff;
  box-shadow: 0 12px 30px rgba(15, 30, 18, 0.08);
}

.header {
  display: flex;
  align-items: baseline;
  justify-content: space-between;
  gap: 12px;
  flex-wrap: wrap;
}

.title {
  font-size: 20px;
  letter-spacing: 0.08em;
  text-transform: uppercase;
}

.score {
  font-size: 14px;
  color: #31523a;
}

.control {
  padding: 8px 12px;
  border-radius: 8px;
  border: 1px solid #c7d3c2;
  background: #f1f4ef;
  cursor: pointer;
  font: inherit;
}

.control.primary {
  background: #21452b;
  color: #ffffff;
  border-color: #21452b;
}

.control:disabled {
  opacity: 0.6;
  cursor: not-allowed;
}

.speed-control {
  display: inline-flex;
  align-items: center;
  gap: 8px;
  font-size: 12px;
  letter-spacing: 0.08em;
  text-transform: uppercase;
  color: #4b5f52;
}

.speed-buttons {
  display: inline-flex;
  gap: 6px;
}

.speed-button {
  font: inherit;
  font-size: 11px;
  letter-spacing: 0.08em;
  text-transform: uppercase;
  padding: 3px 8px;
  border-radius: 999px;
  border: 1px solid #c7d3c2;
  background: #f1f4ef;
  color: #21452b;
  cursor: pointer;
}

.speed-button.active {
  background: #21452b;
  color: #ffffff;
  border-color: #21452b;
}

.score-item {
  white-space: nowrap;
}

.score-item.blue {
  color: #2b5f9e;
}

.score-item.red {
  color: #9e2b2b;
}

.score-item.green {
  color: #2b7a3b;
}

.score-item.yellow {
  color: #9a7b1f;
}

.score-item.purple {
  color: #6b4ba8;
}

.score-item.orange {
  color: #c96a1b;
}

.main {
  display: grid;
  grid-template-columns: minmax(0, 1fr) 336px;
  gap: 16px;
  align-items: start;
}

.arena {
  display: grid;
  grid-template-columns: repeat(3, minmax(0, 1fr));
  gap: 16px;
}

.side {
  display: grid;
  gap: 12px;
}

.lane {
  display: grid;
  gap: 10px;
  justify-items: center;
  padding: 12px;
  border: 1px solid #e0e7dc;
  border-radius: 10px;
  background: #fafbf9;
  min-width: 0;
}

.lane-header {
  width: 100%;
  display: flex;
  justify-content: space-between;
  align-items: center;
  font-size: 12px;
  letter-spacing: 0.12em;
  text-transform: uppercase;
}

.strategy-select {
  font: inherit;
  font-size: 11px;
  letter-spacing: 0.08em;
  text-transform: uppercase;
  padding: 2px 6px;
  border-radius: 6px;
  border: 1px solid #c7d3c2;
  background: #f1f4ef;
  color: inherit;
}

.strategy-description {
  width: 100%;
  font-size: 10px;
  letter-spacing: 0.04em;
  color: #647063;
  margin-top: 2px;
  text-align: right;
  font-style: italic;
}

.manual-pill {
  padding: 2px 8px;
  border-radius: 999px;
  border: 1px solid #c7d3c2;
  background: #f1f4ef;
  font-size: 11px;
  letter-spacing: 0.08em;
  text-transform: uppercase;
  color: inherit;
}

.manual-toggle {
  display: inline-flex;
  align-items: center;
  gap: 8px;
  font-size: 12px;
  letter-spacing: 0.08em;
  text-transform: uppercase;
  color: #4b5f52;
}

.manual-toggle input {
  width: 16px;
  height: 16px;
}

.lane-header.blue {
  color: #2b5f9e;
}

.lane-header.red {
  color: #9e2b2b;
}

.lane-header.green {
  color: #2b7a3b;
}

.lane-header.yellow {
  color: #9a7b1f;
}

.lane-header.purple {
  color: #6b4ba8;
}

.lane-header.orange {
  color: #c96a1b;
}

.board {
  --cell-bg: #f5f7f2;
  display: grid;
  grid-template-columns: repeat(var(--grid-size), 1fr);
  gap: 1px;
  background: #dde5d8;
  padding: 1px;
  border-radius: 8px;
  width: 100%;
  max-width: 360px;
  aspect-ratio: 1;
}

.board-wrap {
  position: relative;
  width: 100%;
  max-width: 360px;
}

.board-overlay {
  position: absolute;
  inset: 0;
  display: grid;
  place-items: center;
  background: rgba(10, 16, 12, 0.5);
  color: #ffffff;
  font-size: 14px;
  letter-spacing: 0.12em;
  text-transform: uppercase;
  border-radius: 8px;
}

.cell {
  background: var(--cell-bg);
  width: 100%;
  height: 100%;
}

.cell.snake,
.cell.head,
.cell.tail {
  position: relative;
}

.cell.snake {
  background: var(--cell-bg);
}

.cell.snake[class*="segment-"]::before {
  content: "";
  position: absolute;
  inset: 0;
  pointer-events: none;
}

.cell.snake[class*="segment-"]::after {
  content: "";
  position: absolute;
  width: 58%;
  height: 58%;
  top: 21%;
  left: 21%;
  border-radius: 999px;
  background: var(--snake-fill, #2b5f9e);
  pointer-events: none;
}

.cell.snake.segment-left-right::before {
  background: linear-gradient(
    to bottom,
    transparent 0 20%,
    var(--snake-fill, #2b5f9e) 20% 80%,
    transparent 80% 100%
  );
}

.cell.snake.segment-up-down::before {
  background: linear-gradient(
    to right,
    transparent 0 20%,
    var(--snake-fill, #2b5f9e) 20% 80%,
    transparent 80% 100%
  );
}

.cell.snake.segment-up-right::before {
  background:
    linear-gradient(var(--snake-fill, #2b5f9e), var(--snake-fill, #2b5f9e))
      center top / 60% 50% no-repeat,
    linear-gradient(var(--snake-fill, #2b5f9e), var(--snake-fill, #2b5f9e))
      right center / 50% 60% no-repeat;
}

.cell.snake.segment-right-down::before {
  background:
    linear-gradient(var(--snake-fill, #2b5f9e), var(--snake-fill, #2b5f9e))
      center bottom / 60% 50% no-repeat,
    linear-gradient(var(--snake-fill, #2b5f9e), var(--snake-fill, #2b5f9e))
      right center / 50% 60% no-repeat;
}

.cell.snake.segment-down-left::before {
  background:
    linear-gradient(var(--snake-fill, #2b5f9e), var(--snake-fill, #2b5f9e))
      center bottom / 60% 50% no-repeat,
    linear-gradient(var(--snake-fill, #2b5f9e), var(--snake-fill, #2b5f9e))
      left center / 50% 60% no-repeat;
}

.cell.snake.segment-left-up::before {
  background:
    linear-gradient(var(--snake-fill, #2b5f9e), var(--snake-fill, #2b5f9e))
      center top / 60% 50% no-repeat,
    linear-gradient(var(--snake-fill, #2b5f9e), var(--snake-fill, #2b5f9e))
      left center / 50% 60% no-repeat;
}

.cell.head::before {
  content: "";
  position: absolute;
  width: 72%;
  height: 72%;
  top: 14%;
  left: 14%;
  border-radius: 999px;
  background: var(--snake-head-fill, var(--snake-fill, #1f436f));
}

.cell.head::after {
  content: "";
  position: absolute;
  width: 24%;
  height: 24%;
  top: 38%;
  left: 38%;
  border-radius: 999px;
  background: rgba(245, 247, 242, 0.95);
}

.cell.tail {
  background: var(--cell-bg);
}

.cell.tail::before {
  content: "";
  position: absolute;
  border-radius: 999px;
  background: var(--snake-fill, #2b5f9e);
}

.cell.tail::after {
  content: "";
  position: absolute;
  width: 56%;
  height: 56%;
  border-radius: 999px;
  background: var(--snake-fill, #2b5f9e);
}

.cell.tail.tail-right::before {
  left: 0;
  top: 28%;
  width: 72%;
  height: 44%;
}

.cell.tail.tail-right::after {
  right: 6%;
  top: 22%;
}

.cell.tail.tail-left::before {
  right: 0;
  top: 28%;
  width: 72%;
  height: 44%;
}

.cell.tail.tail-left::after {
  left: 6%;
  top: 22%;
}

.cell.tail.tail-down::before {
  left: 28%;
  top: 0;
  width: 44%;
  height: 72%;
}

.cell.tail.tail-down::after {
  left: 22%;
  bottom: 6%;
}

.cell.tail.tail-up::before {
  left: 28%;
  bottom: 0;
  width: 44%;
  height: 72%;
}

.cell.tail.tail-up::after {
  left: 22%;
  top: 6%;
}

.cell.snake.blue {
  --snake-fill: #2b5f9e;
}

.cell.tail.blue {
  --snake-fill: #2b5f9e;
}

.cell.head.blue {
  --snake-head-fill: #1f436f;
}

.cell.snake.red {
  --snake-fill: #9e2b2b;
}

.cell.tail.red {
  --snake-fill: #9e2b2b;
}

.cell.head.red {
  --snake-head-fill: #6f1f1f;
}

.cell.snake.green {
  --snake-fill: #2b7a3b;
}

.cell.tail.green {
  --snake-fill: #2b7a3b;
}

.cell.head.green {
  --snake-head-fill: #205a2c;
}

.cell.snake.yellow {
  --snake-fill: #b08a1d;
}

.cell.tail.yellow {
  --snake-fill: #b08a1d;
}

.cell.head.yellow {
  --snake-head-fill: #7e6114;
}

.cell.snake.purple {
  --snake-fill: #6b4ba8;
}

.cell.tail.purple {
  --snake-fill: #6b4ba8;
}

.cell.head.purple {
  --snake-head-fill: #4a3378;
}

.cell.snake.orange {
  --snake-fill: #c96a1b;
}

.cell.tail.orange {
  --snake-fill: #c96a1b;
}

.cell.head.orange {
  --snake-head-fill: #8a4712;
}

.cell.food {
  background: #d05f3b;
}

.cell.obstacle {
  background: #5b3d2b;
}

.cell.obstacle.fresh {
  background: #c38d2c;
}

.lane-stats {
  width: 100%;
  display: flex;
  justify-content: space-between;
  font-size: 12px;
  color: #3e4b43;
}

.lane-footer {
  width: 100%;
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 8px;
}

.status {
  font-size: 13px;
  color: #4b5f52;
}

.panel {
  display: grid;
  gap: 6px;
  padding: 12px;
  border-radius: 10px;
  border: 1px solid #e0e7dc;
  background: #fafbf9;
}

.panel-title {
  font-size: 12px;
  letter-spacing: 0.12em;
  text-transform: uppercase;
  color: #4b5f52;
}

.benchmark-status {
  display: flex;
  align-items: center;
  gap: 6px;
  font-size: 12px;
  color: #2f3d33;
}

.benchmark-status-pill {
  padding: 2px 8px;
  border-radius: 999px;
  border: 1px solid #c7d3c2;
  background: #f1f4ef;
  font-size: 10px;
  letter-spacing: 0.08em;
  text-transform: uppercase;
}

.benchmark-status-pill.running {
  background: #21452b;
  color: #ffffff;
  border-color: #21452b;
}

.benchmark-status-pill.finished {
  background: #dfe8db;
  color: #21452b;
  border-color: #c7d3c2;
}

.benchmark-controls {
  display: flex;
  flex-wrap: wrap;
  gap: 6px;
}

.benchmark-progress {
  font-size: 12px;
  color: #3e4b43;
}

.benchmark-empty {
  font-size: 12px;
  color: #6a7a6f;
}

.benchmark-table {
  display: grid;
  gap: 6px;
  font-size: 11px;
  color: #2f3d33;
}

.benchmark-row {
  display: grid;
  grid-template-columns: minmax(0, 1.1fr) repeat(6, minmax(0, 0.6fr));
  gap: 6px;
  align-items: center;
  font-variant-numeric: tabular-nums;
  padding: 2px 4px;
}

.benchmark-row.best {
  background: #e7f0e5;
  border-radius: 6px;
}

.benchmark-header {
  font-size: 10px;
  letter-spacing: 0.08em;
  text-transform: uppercase;
  color: #647063;
}

.benchmark-model {
  font-family: "Space Grotesk", "Avenir Next", "Helvetica Neue", Arial, sans-serif;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.benchmark-best {
  font-size: 12px;
  font-weight: 600;
  color: #21452b;
}

.standings {
  display: grid;
  gap: 6px;
  font-size: 12px;
  color: #2f3d33;
  min-width: 0;
}

.standings-row {
  display: grid;
  grid-template-columns: 10px 28px minmax(0, 1fr) 44px 44px minmax(0, 0.8fr) minmax(0, 0.8fr);
  gap: 6px;
  align-items: center;
  padding: 3px 4px;
  border-radius: 6px;
}

.standings-header {
  font-size: 11px;
  letter-spacing: 0.08em;
  text-transform: uppercase;
  color: #647063;
}

.standings-name {
  font-family: "Space Grotesk", "Avenir Next", "Helvetica Neue", Arial, sans-serif;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.standings-name.blue {
  color: #2b5f9e;
}

.standings-name.red {
  color: #9e2b2b;
}

.standings-name.green {
  color: #2b7a3b;
}

.standings-name.yellow {
  color: #9a7b1f;
}

.standings-name.purple {
  color: #6b4ba8;
}

.standings-name.orange {
  color: #c96a1b;
}

.standings-dot {
  width: 8px;
  height: 8px;
  border-radius: 50%;
  display: inline-block;
}

.standings-dot.blue { background: #2b5f9e; }
.standings-dot.red { background: #9e2b2b; }
.standings-dot.green { background: #2b7a3b; }
.standings-dot.yellow { background: #b08a1d; }
.standings-dot.purple { background: #6b4ba8; }
.standings-dot.orange { background: #c96a1b; }

.standings-pos {
  font-weight: 700;
  font-variant-numeric: tabular-nums;
}

.standings-score {
  text-align: right;
  font-weight: 600;
  font-variant-numeric: tabular-nums;
}

.standings-leader {
  background: #eef3eb;
  border: 1px solid #c7d3c2;
}

.standings-time,
.standings-gap {
  text-align: right;
  font-variant-numeric: tabular-nums;
}


.lap-block {
  display: grid;
  gap: 6px;
  padding: 8px 10px;
  border-radius: 8px;
  background: #f1f4ef;
  border: 1px solid #d2dbcf;
}

.lap-title {
  font-size: 12px;
  letter-spacing: 0.08em;
  text-transform: uppercase;
}

.lap-title.blue {
  color: #2b5f9e;
}

.lap-title.red {
  color: #9e2b2b;
}

.lap-title.green {
  color: #2b7a3b;
}

.lap-title.yellow {
  color: #9a7b1f;
}

.lap-title.purple {
  color: #6b4ba8;
}

.lap-title.orange {
  color: #c96a1b;
}

.lap-empty {
  font-size: 12px;
  color: #6a7a6f;
}

.lap-list {
  display: grid;
  gap: 4px;
  font-size: 12px;
  color: #2f3d33;
  max-height: 72px;
  overflow-y: auto;
  padding-right: 4px;
}

.lap-row {
  display: grid;
  grid-template-columns: 30px 1fr 1fr 1fr;
  gap: 6px;
}

.lap-total {
  text-align: right;
  color: #647063;
}

.lap-gap {
  text-align: right;
  color: #2f3d33;
}

.lap-gap.lead {
  font-weight: 700;
}

@media (max-width: 900px) {
  .main {
    grid-template-columns: 1fr;
  }

  .side {
    grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
  }

  .board {
    width: min(80vw, 360px);
  }
}

@media (max-width: 640px) {
  .arena {
    grid-template-columns: repeat(2, minmax(220px, 1fr));
  }
}
